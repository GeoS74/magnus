1) справочник городов Деловых линий содержит 2 Челябинска.
    Причём в одном из них всего 2 улицы, и те это СНТ
2) отключить в продакшн версии автоматическое индексирование БД
3) поле cityID из справочника терминалов не соответствует cityID справочника населенных пунктов
4) если выбрать какую-нибудь деревню, то день забора груза может быть отодвинут более чем на 10 дней относительно текущей даты.
    Это надо учитывать при обработке ошибки 180012
5) в КИТе пользователь сам генерирует токены, каждый токен имеет свой лимит запроса.
    Не выяснено: объем лимита и возобновляемый лимит или нет
6) РЕШЕНО: при заливке справочника населенных пунктов Деловых линий, может затираться ведущий 0 кода КЛАДР.
    надо контролировать длину кода, которая должна быть 25 символов
    При этом нормальный код КЛАДР - 13 символов
7) РЕШЕНО: в справочнике Деловых есть город Карачаевск (Карачаево-черкесская)
    в справочнике ПЭК город Карачаевск относится к Невинномыску (Ставропольский край)
8) в справочнике ПЭК город Москва - это "Москва Восток"
9) г. Дмитров (Московская обл.) в справочнике Деловых имеет код "5004500000000000000000000"
    в КЛАДР у этого города код "5000006100051".
    Такая же ситуация ещё с несколькими городами Московской области
10) РЕШЕНО: справочник КИТа использует только коды КЛАДР
11) в справочнике ПЭК г. Нерюнгри относится к Благовещенску
12) Решено - г. Петровск в справочнике деловых имеет код 6400000900000000000000000
    в основном справочнике 6402600700000
13) Деловые линии не дают цену по забору груза из г. Петровск (Саратовская обл.)
    Причём на сайте Деловых тоже самое.
14) проверить работу индексов БД
15) справочник КИТа также изменяет коды КЛАДР, укорачивая их на 1 символ.
    Пример:
    //7400000100000 - код Челябинска из основного справочника
    //740000100000 -  код Челябинска из справочника КИТа
16) не понятно что делать с городами типа Воронеж-45
17) Деловые линии ожидают получить параметры ВГХ самого большого места, а не общие
18) Более детально проработать подбор города в ПЭКе. Возможно написать скрипт, который симитирует запросы из основного справочника ко всем справочникам ТК и проанализировать результат.
19) API ПЭКа не позволяет выбрать характер груза и расчитывает перевозку как запасные части (она дороже)
20) в ПЭКе можно расчитать авиадоставку
21) в ПЭКе если cityID меньше 0 (основной город), то расчёт на сайте ПЭКа производится без учёта забора груза, хотя информация по забору предоставляется.
эту ситуацию можно обыграть, но надо ли?
22) СДЭК https://www.cdek.ru/ru/integration
https://api-docs.cdek.ru/29923849.html
https://www.cdek-calc.ru/
23) в справочнике СДЭКа не все города имеют код КЛАДР (прим. Петровск)

пример запроса JWT токена:
'https://api.edu.cdek.ru/v2/oauth/token?grant_type=client_credentials&client_id=EMscd6r9JnFiQ3bLoyjJY6eM78JrJceI&client_secret=PjLZkKBHEiLK3YsjtNrt3TGNG0ahs3kG'
Далее при обращении к API использовать заголовок с токеном:
Authorization: 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzY29wZSI6WyJvcmRlcjphbGwiLCJwYXltZW50OmFsbCJdLCJleHAiOjE2NDcyNjYxMTUsImF1dGhvcml0aWVzIjpbInNoYXJkLWlkOnJ1LTAxIiwiZnVsbC1uYW1lOtCi0LXRgdGC0LjRgNC-0LLQsNC90LjQtSDQmNC90YLQtdCz0YDQsNGG0LjQuCDQmNCcLCDQntCR0KnQldCh0KLQktCeINChINCe0JPQoNCQ0J3QmNCn0JXQndCd0J7QmSDQntCi0JLQldCi0KHQotCS0JXQndCd0J7QodCi0KzQriIsImNvbnRyYWN0OtCY0Jwt0KDQpC3Qk9Cb0JMtMjIiLCJhY2NvdW50LWxhbmc6cnVzIiwiYWNjb3VudC11dWlkOmU5MjViZDBmLTA1YTYtNGM1Ni1iNzM3LTRiOTljMTRmNjY5YSIsImFwaS12ZXJzaW9uOjEuMSIsImNsaWVudC1pZC1lYzU6ZWQ3NWVjZjQtMzBlZC00MTUzLWFmZTktZWI4MGJiNTEyZjIyIiwiY2xpZW50LWlkLWVjNDoxNDM0ODIzMSIsImNvbnRyYWdlbnQtdXVpZDplZDc1ZWNmNC0zMGVkLTQxNTMtYWZlOS1lYjgwYmI1MTJmMjIiLCJzb2xpZC1hZGRyZXNzOmZhbHNlIiwiY2xpZW50LWNpdHk60J3QvtCy0L7RgdC40LHQuNGA0YHQuiwg0J3QvtCy0L7RgdC40LHQuNGA0YHQutCw0Y8g0L7QsdC7LiJdLCJqdGkiOiJiMDc4ZGFhMi1lZmIzLTRjNGEtOThiMC0wZDM0YjhhZTc0OTMiLCJjbGllbnRfaWQiOiJFTXNjZDZyOUpuRmlRM2JMb3lqSlk2ZU03OEpySmNlSSJ9.Gva54c3_6hyY1ND3GTx2lPthTLQspCxJzvo7MXLNAXBDUYxH0faHHhoa9vzKPRP5mfYkcP-lzA9p-mn3rLihNkX3x0MKw6IQWbz7wTdWjwxpY6NeA3OjR0Z30USW-ykWwx2g7rZb9fAKyNI7cjXZZdQnPwz8jQqdU0xVYh4pXkg31R6PkU40EhoOo0G5p0a1L6K9Z7Ncbd32dagZHX47XilbcgjlQ4SopfrG8a5AJMeV20aP6QLerpwrphqF4D7CvgE7BPtyRZ9ba7i4NsFZ9_EzmzA9V8LPA-VcpzxmlMvelqMhhzeNitmOpAUUxLUwkcX0qrqhjN8vZxJyAv9pPw'

Решено -    Деловые Линии (в том числе FTL-подразделение ДЛ-Транс)
В работе -  ПЭК
Решено -    GTD (Кит, Кашалот)
            ЖелДорЭкспедиция
            Байкал Сервис
            MagicTrans
            Да-Транс
            Boxberry
            DPD
            ГлавДоставка
            СДЭК
            Согруз
            Энергия
            Почта России
            Очаковская Логистическая Компания
            Адамос Логистик
            Возовоз
            MagicTrans


Точки роста:
1) создать страницу с кнопками для обновления справочников
2) основной справочник загружать через форму
3) переделать option list подбора городов. При вводе латиницы поиск работает, а лист не отображается

Для  Ubuntu:
1) установка MongoDB
https://stackoverflow.com/questions/48092353/failed-to-start-mongod-service-unit-mongod-service-not-found

Удалить файлы, а дальше следовать инструкциям документации
https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/
...


~~~~~~~~~Создание своего справочника КЛАДР
БД КЛАДР
https://fias.nalog.ru/Updates
КЛАДР-Браузер
скачать: 
https://sourceforge.net/projects/kladr-viewer/
описание:
https://www.sitebill.ru/s/topic/2288-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B8%D0%B7-%D0%BA%D0%BB%D0%B0%D0%B4%D1%80-%D0%B2-excel-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F/

Вариант короткий:
1) скачать БД КЛАДР (см. ссылку выше), в архиве несколько файлов .DBF
2) с помощью КЛАДР-браузера открыть БД
3) перевести файл KLADR.DBF в формат .csv
4) выделить необходимые населенные пункты по признаку (горот, пгт и т.д.)
5) вручную выдернуть из БД самый верхний уровень КЛАДР (название областей)
6) свести всё в одну таблицу
7) оставить только актуальные названия (см. расшифровку кодов КЛАДР ниже)
8) ВАЖНО!!! кодировка файла .csv должна быть UTF-8 with BOM

Вариант долгий:
1) скачать БД КЛАДР (см. ссылку выше), в архиве несколько файлов .DBF
2) с помощью КЛАДР-браузера открыть БД
3) перевести файл KLADR.DBF в формат .csv
4) в файле .csv на новой вкладке заполнить вручную регионы и города, которые не помечены серым цветом (цветом помечаются устаревшие данные).
    Должно получиться примерно 637 строчек. Проблема здесь в том, что не все города будут на верхнем уровне, т.к. некоторые (напр. Аша) находятся внутри иерархии (напр. в Ашинском -не)
5) на основной вкаладке .csv перевести коды КЛАДР в нормальный вид, иначе они отображаются примерно так 2,001Е+11
    также следует обратить внимание на то, что коды, начинающиеся на "0" теряют этот ноль.
    Формула для нормализации кода КЛАДР населенного пункта
    =ЕСЛИ( ДЛСТР(C725)=12; "`0"&C725;"`"&C725)
    на выходе: `0200100000000
6) нормализовать код региона. Формула использует значение, полученное при нормализации кода для населенного пункта:
    =ЛЕВСИМВ(J725;3)&"00000000000"
    на выходе: `0200000000000
7) найти строчки, которые уже попали в основной список городов. Формула:
    =ВПР(J725;Лист1!$F$2:$F$638;1;0)
    на выходе: #Н/Д - если код не попал в список, код - если он там уже есть
8) привести значение, полученное в п.п.7 к 0 (код отсутствует) или 1 (код уже есть)
    Формула:
    =ЕСЛИ(ЕСНД(K725;1)=1;0;1)
    на выходе: 0 (код отсутствует) или 1 (код уже есть)
9) установить признак необходимости добавления города в основной список. Для этого используется условие: если код ещё не в основном списке и населенный пункт это город.
    Формула:
    =ЕСЛИ(И(L725=0;B725="г");1;0)
    на выходе: 1 - если надо добавить город в основной список, 0 - если нет
    здесь могут возникнуть дубликаты, например Уфа, в БД через КЛАДР-браузер е неё код 0200000100000, в .csv выгруженном из БД будет 2-е Уфы (хз почему так)
10) проверить на дубликаты. Взять название из колонки NAME и сравнить с наименованием в новом списке.
    Формула:
    =ВПР(A1486;Лист1!$D$2:$D$638;1;0)
    на выходе: #Н/Д - если это не дубликат, либо название города - если это дубликат
11) отфильтровать, оставив те, которых нет в новом списке и убрать дубликаты


Долгопрудный
`50 000 029 000 00
`50 019 002 000 51


файл Kladr.dbf – содержит записи с объектами первых четырех уровней классификации (регионы; районы (улусы); города, поселки городского типа, сельсоветы; сельские населенные пункты);
Структура кодового обозначения в блоке "Код":
СС РРР ГГГ ППП АА, где
СС – код субъекта Российской Федерации (региона), коды регионов представлены в Приложении 2 к Описанию классификатора адресов Российской Федерации (КЛАДР);
РРР – код района;
ГГГ – код города;      
ППП – код населенного пункта,
АА – признак актуальности адресного объекта.

Признак актуальности может принимать следующие значения:
            "00” – актуальный объект (его наименование, подчиненность соответствуют состоянию на данный момент адресного пространства). 
            "01”-"50” – объект был переименован, в данной записи приведено одно из прежних его наименований (актуальный адресный объект присутствует в базе данных с тем же кодом, но с признаком актуальности "00”;
            "51” –  объект был переподчинен или влился в состав другого объекта (актуальный адресный объект определяется по базе Altnames.dbf);
            "52”-"98” – резервные значения признака актуальности;
            ”99” – адресный объект не существует, т.е. нет соответствующего ему актуального адресного объекта.
файл Street.dbf – содержит записи с объектами пятого уровня классификации (улицы городов и населенных пунктов);
Структура кодового обозначения в блоке "Код":
СС РРР ГГГ ППП УУУУ АА, где
СС – код субъекта Российской Федерации (региона), коды регионов представлены в Приложении 2 к Описанию классификатора адресов Российской Федерации (КЛАДР);
РРР – код района;
ГГГ – код города;      
ППП – код населенного пункта;    
УУУУ – код улицы;
АА – признак актуальности наименования адресного объекта.

файл Doma.dbf – содержит записи с объектами шестого уровня классификации (номера домов улиц городов и населенных пунктов);
файл Flat.dbf – содержит записи с объектами седьмого уровня классификации (номера квартир домов);
файл Socrbase.dbf – содержит записи с краткими наименованиями типов адресных объектов;
файл Altnames.dbf –содержит сведения о соответствии кодов записей со старыми и новыми наименованиями адресных объектов, а также сведения о соответствии кодов адресных объектов до и после их переподчинения.